%h2 Trains
%form
  .form-group
    /%input#exampleInputEmail1.form-control{:placeholder => "From station", name: "search[from]", :type => "text", value: @station_from}
    /%input#exampleInputEmail1.form-control{:placeholder => "To station", name: "search[to]", :type => "text", value: @station_to}
    %select{name: "search[from]"}
      - @stations.each do |station|
        %option{value: station["code"], selected: station["code"]==@station_from}= station["name"]
    %select{name: "search[to]"}
      - @stations.each do |station|
        %option{value: station["code"], selected: station["code"]==@station_to}= station["name"]
  %button.btn.btn-primary{:type => "submit"} Submit
= @trains
- if @trains
  %table.table.table-striped
    %thead
      %th #
      %th Train Number
      %th Train Name
      %th From
      %th Start Time
      %th To
      %th Arrival Time
      %th Travel Time
      %th Class
    %tbody
      - if @trains["status"]=="OK"
        - @trains["result"].each_with_index do |train, index|
          = form_for "", ticket_fare_path do |f|
            - train_no = train["trainno"]
            %tr
              %td= index + 1
              %td
                %input{type: :hidden, name: "#{train_no}[from]", value: train["from"]}
                %input{type: :hidden, name: "#{train_no}[to]", value: train["to"]}
                = train["trainno"]
              %td= train["name"]
              %td= train["fromname"]
              %td= train["dep"]
              %td= train["toname"]
              %td= train["arr"]
              %td= train["traveltime"]
              %td
                - ticket_classes = train["class"].split(",")
                -ticket_classes.each do |c| 
                  %button.btn.btn-default{type: :submit} c
      - else
        %td{colspan: 5} Something went wrong